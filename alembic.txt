1.
```bash
alembic init --template async migration
```

2. В файле migration/env.py
```python
import asyncio
# Импортируем модуль стандартной библиотеки для работы с ОС.
import os
from logging.config import fileConfig

# Импортируем функцию для чтения файлов с переменными окружения
# из библиотеки python-dotenv. Эта библиотека была установлена
# вместе с uvicorn.
from dotenv import load_dotenv
from sqlalchemy import engine_from_config
from sqlalchemy import pool
from sqlalchemy.ext.asyncio import AsyncEngine

from alembic import context

# Загрузим файл .env в переменные окружения.
# Библиотека python-dotenv умеет находить файл в «вышестоящих» каталогах,
# поэтому полный путь указывать не обязательно.
load_dotenv('.env')

# this is the Alembic Config object, which provides
# access to the values within the .ini file in use.
config = context.config

# Установим для переменной sqlalchemy.url значение из нашего .env файла.
config.set_main_option('sqlalchemy.url', os.environ['DATABASE_URL'])

...  # Остальное содержимое файла. 
```

3. alembic revision --autogenerate -m "Initial commit"

4. alembic upgrade head